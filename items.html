<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Items - Inventory App</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      background-color: #0a0a0a;
      color: white;
      font-family: 'Segoe UI', sans-serif;
      padding-bottom: 60px;
    }
    .container {
      padding: 16px 20px 20px 20px;
      max-width: 1000px;
      margin: 0 auto;
    }
    .top-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 10px;
      margin-bottom: 20px;
    }
    .top-bar h2 {
      font-size: 24px;
      font-weight: bold;
    }
    .filter-button {
      padding: 10px 40px 10px 16px;
      background-color: #1e1e1e;
      color: white;
      border: none;
      border-radius: 12px;
      font-size: 1rem;
      cursor: pointer;
      appearance: none;
      background-image: url("data:image/svg+xml,%3Csvg fill='white' viewBox='0 0 24 24' width='18' height='18' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M7 10l5 5 5-5z'/%3E%3C/svg%3E");
      background-repeat: no-repeat;
      background-position: right 14px center;
      background-size: 16px;
    }
    .filter-button:focus,
    .filter-button:hover {
      background-color: #2563eb;
    }
    .search-bar {
      display: flex;
      flex-direction: column;
      gap: 12px;
      margin-bottom: 24px;
    }
    .search-bar input {
      padding: 14px;
      border-radius: 12px;
      border: none;
      background-color: #1a1a1a;
      color: white;
      font-size: 1rem;
    }
    .search-bar input::placeholder {
      color: #777;
    }
    .item-list {
      display: flex;
      flex-direction: column;
      gap: 14px;
    }
    .item {
      display: flex;
      align-items: center;
      gap: 14px;
      background: #1e1e1e;
      border-radius: 12px;
      padding: 14px;
      cursor: pointer;
      transition: background 0.2s ease;
    }
    .item:hover {
      background: #333;
    }
    .item img {
      width: 60px;
      height: 60px;
      object-fit: cover;
      border-radius: 8px;
    }
    .item-info p {
      font-size: 14px;
      margin: 3px 0;
    }
    .item-info p span.label {
      color: #60a5fa;
      font-weight: bold;
    }
    .item-info p span.value {
      color: white;
    }
    .serial {
      font-size: 12px;
      color: #aaa;
      font-family: monospace;
    }
    .add-button {
      position: fixed;
      bottom: 90px;
      right: 24px;
      background-color: #2563eb;
      color: white;
      border: none;
      border-radius: 50%;
      width: 48px;
      height: 48px;
      font-size: 36px;
      font-weight: bold;
      cursor: pointer;
      box-shadow: 0 4px 12px rgba(37, 99, 235, 0.5);
    }
    .add-button:hover {
      background-color: #1d4ed8;
    }
    nav {
      position: fixed;
      bottom: 0;
      left: 0;
      width: 100%;
      background-color: #111;
      display: flex;
      justify-content: space-around;
      padding: 6px 0;
      box-shadow: 0 -2px 5px rgba(0, 0, 0, 0.6);
      z-index: 1000;
    }
    nav a {
      color: #888;
      text-decoration: none;
      font-size: 13px;
      font-weight: 500;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 3px;
      padding: 6px 8px;
      border-radius: 10px;
      transition: all 0.3s ease;
      min-width: 60px;
    }
    nav a:hover,
    nav .active {
      background-color: #2563eb;
      color: white;
    }
    @media (max-width: 600px) {
      .top-bar h2 {
        font-size: 20px;
      }
      .filter-button {
        width: 100%;
      }
      .item img {
        width: 50px;
        height: 50px;
      }
      .item-info p {
        font-size: 13px;
      }
      .add-button {
        width: 48px;
        height: 48px;
        font-size: 30px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="top-bar">
      <h2>Items</h2>
      <select class="filter-button" onchange="filterCategory(this.value)">
        <option value="all">All</option>
        <option value="Gel">Gel</option>
        <option value="Face Wash">Face Wash</option>
        <option value="Cleaner">Cleaner</option>
      </select>
    </div>

    <div class="search-bar">
      <input type="text" placeholder="Search by Name" id="nameSearch" onkeyup="searchItems()" />
      <input type="text" placeholder="Search by Serial Number" id="serialSearch" onkeyup="searchItems()" />
    </div>

    <div class="item-list" id="itemList"></div>
  </div>

  <button class="add-button" onclick="location.href='add-item.html'">+</button>
  <nav>
    <a href="home.html">
      <span>üè†</span>
      <span>Home</span>
    </a>
    <a href="items.html" class="active">
      <span>üì¶</span>
      <span>Items</span>
    </a>
    <a href="transactions.html">
      <span>üí±</span>
      <span>Transactions</span>
    </a>
    <a href="settings.html">
      <span>‚öôÔ∏è</span>
      <span>Settings</span>
    </a>
  </nav>

  <script>
    const defaultItems = [
      {
        name: "Green Shine Face Wash",
        serial: "CA1001",
        price: 100,
        stock: 20,
        category: "Face Wash",
        image: "item1.jpg",
        date: "2024-01-10",
      },
      {
        name: "Organic Green Body Shower Gel",
        serial: "CB1002",
        price: 200,
        stock: 15,
        category: "Gel",
        image: "item2.jpg",
        date: "2024-02-18",
      },
      {
        name: "Multipurpose Cleaner Gelwash",
        serial: "CC1003",
        price: 180,
        stock: 25,
        category: "Cleaner",
        image: "item3.jpg",
        date: "2024-03-22",
      },
      {
        name: "Gelwash",
        serial: "CD1004",
        price: 220,
        stock: 5,
        category: "Gel",
        image: "item4.jpg",
        date: "2024-04-11",
      },
    ];

    function getDeletedDefaultSerials() {
      return JSON.parse(localStorage.getItem("deletedDefaultItems")) || [];
    }

    function setDeletedDefaultSerials(arr) {
      localStorage.setItem("deletedDefaultItems", JSON.stringify(arr));
    }

    let allItems = [];

    function loadItems() {
      const stored = JSON.parse(localStorage.getItem("inventoryItems")) || [];
      const deletedSerials = getDeletedDefaultSerials();
      const filteredDefaults = defaultItems.filter(item => !deletedSerials.includes(item.serial));
      allItems = [...filteredDefaults, ...stored];
      renderItems(allItems);
    }

    function renderItems(items) {
      const container = document.getElementById("itemList");
      container.innerHTML = "";

      if (items.length === 0) {
        container.innerHTML = `<p style="text-align:center; color:#888;">No items found.</p>`;
        return;
      }

      items.forEach((item) => {
        const div = document.createElement("div");
        div.className = "item";
        div.setAttribute("data-name", item.name.toLowerCase());
        div.setAttribute("data-serial", item.serial.toLowerCase());
        div.setAttribute("data-category", item.category);
        div.onclick = () => {
          window.location.href = `product-detail.html?serial=${item.serial}`;
        };
        div.innerHTML = `
          <img src="${item.image}" alt="${item.name}" />
          <div class="item-info">
            <p><strong>${item.name}</strong></p>
            <p class="serial">S/N: ${item.serial}</p>
            <p><span class="label">Price:</span> <span class="value">‚Çπ${item.price}</span></p>
            <p><span class="label">Stock:</span> <span class="value">${item.stock}</span></p>
          </div>
        `;
        container.appendChild(div);
      });
    }

    function searchItems() {
      const nameVal = document.getElementById("nameSearch").value.toLowerCase();
      const serialVal = document.getElementById("serialSearch").value.toLowerCase();
      const category = document.querySelector(".filter-button").value;

      let filtered = allItems.filter((item) =>
        item.name.toLowerCase().includes(nameVal) &&
        item.serial.toLowerCase().includes(serialVal)
      );

      if (category !== "all") {
        filtered = filtered.filter(item => item.category === category);
      }

      renderItems(filtered);
    }

    function filterCategory(category) {
      searchItems();
    }

    window.onload = loadItems;
  </script>
</body>
</html>
